# Partition/device formatting commands #
name: format
help: 'Setup drives for either hush or backup partitions'

commands:
  - name: sdcard
    alias: hush
    help: 'Device storing identity secrets (GPG/coffin/age keys)'
    args:
      - name: device
        required: true
        help: "Device file of the sdcard drive (must be a whole drive without a partition number, eg. /dev/sda)"
    flags:
      - long: --verbose
        short: -v
        help: "Show verbose logging"
      - long: --size-percent
        short: -P
        arg: percent
        default: "90"
        required: false
        help: "Size of encrypted partition, as a percentage of the entire drive"
        conflicts: [ --size-absolute ]
      - long: --size-absolute
        short: -A
        arg: size 
        required: false
        help: "Size of encrypted partition, in absolute terms, WITH unit (eg. 100G, 20M, etc)"
        conflicts: [ --size-percent ]
        validate: partition_size
    examples:
      - format sdcard /dev/xvdi
  - name: backup 
    help: "Device storing backup data (identities' secrets/data, hush.img, etc)"
    args:
      - name: device
        required: true
        help: "Device file of the backup drive (must be a whole drive without a partition number, eg. /dev/sdb)"
    flags:
      - long: --verbose
        short: -v
        help: "Show verbose logging"
    examples:
      - format backup /dev/xvdi
