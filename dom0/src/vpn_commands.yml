name: vpn
help: Create, configure, manage and use VPN gateways for an identity.

commands:
  - name: create
    help: Create VPN gateway from a template, or by cloning an existing one. 
    flags:
      - &verbose      
        long: --verbose
        short: -v
        help: "Show verbose logging"
      - long: --name
        short: -N
        help: "Use a different name for naming identity VMs"
        arg: name 
      - long: --label
        short: -L
        help: "Specify a label color to be used for all VMs belonging to this identity"
        arg: color 
        # VPN gateway options
      - long: --no-vpn
        short: -V
        help: "Don't create a VPN gateway"
        conflicts: [ --clone-vpn-from --vpn-over-tor ]
      - long: --clone-vpn-from
        help: "Instead of creating the VPN gateway from a template, clone an existing VPN AppVM"
        arg: vpn_gw 
        # Other network options
      - long: --vpn-over-tor
        help: "Instead of routing TOR traffic through the VPN, route the VPN traffic through TOR"
        conflicts: [ --no-vpn --no-gw ]

  - name: setup
    help: Manage, import network configurations and run associated setup wizards
    flags:
      - *verbose
      - long: --config-in
        short: -c
        help: "VM in which to browse for VPN configuration(s)"
        arg: config_vm
    args:
      - name: vm 
        help: "gateway VM to operate setup on"
        required: true

  - name: start 
    help: Start a VPN gateway in the background
    args:
      - name: vm 
        help: "gateway VM to start"
        required: true
    flags:
      - *verbose

  - name: stop 
    help: Stop a VPN gateway
    args:
      - name: vm 
        help: "gateway VM to stop"
        required: true
    flags:
      - *verbose

  - name: enable 
    help: Automatically start a VPN gateway when starting the identity.
    args:
      - name: vm 
        help: "gateway VM to enable autostart for"
        required: true
    flags:
      - *verbose

  - name: delete
    help: Delete a VPN gateway
    args:
      - name: vm 
        help: "gateway VM to delete"
        required: true
    flags:
      - *verbose
